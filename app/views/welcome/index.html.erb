

<script type="text/javascript">
//CABEÇALHOS DAS FUNCOES


NumClick=0;
var LastX;
var LastY;

document.addEventListener("DOMContentLoaded", init, false);
var ctx;
function init()
      {
        var canvas = document.getElementById("myCanvas");
        canvas.addEventListener("mousedown", getPosition, false);
        ctx=canvas.getContext("2d");

      }


function getPosition(event)
    {

    
    var totalOffsetX = 0;
    var totalOffsetY = 0;
    var canvasX = 0;
    var canvasY = 0;
    var currentElement = this;
    
    //ctx=canvas.getContext("2d");

    do{
        totalOffsetX += currentElement.offsetLeft;
        totalOffsetY += currentElement.offsetTop;
      }
    while(currentElement = currentElement.offsetParent)

    canvasX = event.pageX - totalOffsetX;
    canvasY = event.pageY - totalOffsetY;
 	  //alert(canvasX +" isto é XX e isto é YY " + canvasY);
  
  if (NumClick>0)
  { 
    //alert("ESTOU A QUERER ESCREVER");
    ctx.beginPath(); 
    ctx.lineWidth="5";
    ctx.strokeStyle="blue"; // Green path
    ctx.moveTo(LastX,LastY);
    ctx.lineTo(canvasX,canvasY);
    ctx.stroke(); // Draw it
    
  }
  else
  {
    //alert("BUUUU");
  }
  
  LastX=canvasX;
  LastY=canvasY;
    NumClick=NumClick+1;
  }

//FUNCS	
function EPar (num)
{	
	//alert("a verificar se o num de cliques é par ele agora está a " + NumClick);
	if (num%2==0 || num==0)
  {
    // alert("DEU TRUE O NumClick"); 
		return true
	}
  else
  {
    //alert("DEU False O NumClick");
		return false
  }
}


function SaveAndClear()
{
	alert("olá Boss isto ainda não corre nada tem calma");
  ctx.fillStyle="white";
ctx.fillRect(0,0,400,200);
NumClick=0;
	//AQUI FICA O CÓDIGO :)
}

function DeleteAll() //leva ou não args?
{
	var r=confirm("Atenção deseja mesmo apagar todos os desenhos da Base de Dados?");
	
	if (r==true)
  		{
  			x="You pressed OK!";
        //apagar 
  			alert("TODOS OS SEUS REGISTOS FORAM APAGADOS");
  		}
	else
  	{
  
  	}
   
  	
//confirm("Atenção deseja mesmo apagar todos os desenhos da Base de Dados?")
 }
	

//FIM DAS FUNCS


//INICIALIZAÇÕES



</script>


<h1>Problema 1 - Rails e HTML5 Canvas</h1>

<table border="0">
  <tr>
    <th>Lista de desenhos</th>
    <th>aqui é dinâmico e fica "desenho num+1" ou seja o desenho actual no CAnvas</th> 
  </tr>
  <tr>
    <td>aqui é dinâmico e fica a lista dos links dos desenhos guardados na BD</td>
    <td>
    		<canvas id="myCanvas" width="400" height="200"  style="border:1px solid #000000;"  
    				onload="FindCanvas()" onresize="FindCanvas()">
    		</canvas>
    </td>
  </tr>
  <tr> 
  	<td>  </td>
  	<td>
  		<button type="button" onclick="SaveAndClear()">Save and clear</button>
  		<button type="button" onclick="DeleteAll()">Delete All!</button> </td>
  </tr>
</table>






